@use '../variables' as *;

// ==============================================
// INPUT COMPONENT
// Based on NJT Design System
// ==============================================

.input-group {
  display: flex;
  flex-direction: column;
  gap: $spacing-200; // 8px
  width: 100%;
  
  // ==================
  // LABEL
  // ==================
  &__label {
    font-family: $font-family-primary;
    font-size: $font-size-sm; // 14px
    font-weight: $font-weight-medium; // 500
    color: $text-neutral-base; // #404753
    line-height: 1.5;
    
    &--required::after {
      content: ' *';
      color: $semantic-red-900;
    }
  }
  
  // ==================
  // INPUT WRAPPER
  // ==================
  &__wrapper {
    position: relative;
    display: flex;
    align-items: center;
  }
  
  // ==================
  // FEEDBACK MESSAGE
  // ==================
  &__feedback {
    display: flex;
    align-items: flex-start;
    gap: $spacing-100; // 4px
    font-family: $font-family-primary;
    font-size: $font-size-sm; // 14px
    font-weight: $font-weight-medium;
    line-height: 1.5;
    
    &--error {
      color: $semantic-red-900; // #e32100
      
      &::before {
        content: '●';
        color: $semantic-red-900;
        flex-shrink: 0;
      }
    }
    
    &--success {
      color: $semantic-blue-1000; // #008bce
      
      &::before {
        content: '●';
        color: $semantic-blue-1000;
        flex-shrink: 0;
      }
    }
  }
}

// ==============================================
// INPUT FIELD
// ==============================================

.input {
  // Base styles
  width: 100%;
  font-family: $font-family-primary;
  font-size: $font-size-base; // 16px
  font-weight: $font-weight-medium; // 500
  line-height: 1.5;
  color: $text-neutral-base; // #404753
  background-color: #ffffff;
  
  // Sizing - Small (default)
  height: $spacing-1000; // 40px
  padding: $spacing-200 $spacing-300; // 8px 12px
  
  // Visual
  border: 1px solid $cold-grey-700; // #a3abba
  border-radius: $radius-base; // 8px
  
  // Transitions
  transition: all $transition-speed $transition-ease;
  
  // Reset
  appearance: none;
  outline: none;
  
  // Placeholder
  &::placeholder {
    color: $cold-grey-1000; // #606b7a
    opacity: 1;
  }
  
  // ==================
  // STATES
  // ==================
  
  // Hover state
  &:hover:not(:disabled):not(:read-only):not(.input--error):not(.input--success) {
    border-color: $cold-grey-1100; // #404753
  }
  
  // Focus state
  &:focus:not(:disabled):not(:read-only) {
    border-color: $teal-1600; // #0b3d3e
    box-shadow: 0 0 0 3px $teal-alpha-20; // Focus ring
  }
  
  // Error state
  &--error,
  &.input--error:focus {
    border-color: $semantic-red-900; // #e32100
    
    &:focus {
      box-shadow: 0 0 0 3px $semantic-red-alpha-20;
    }
  }
  
  // Success state
  &--success,
  &.input--success:focus {
    border-color: $semantic-blue-1000; // #008bce
    
    &:focus {
      box-shadow: 0 0 0 3px $semantic-blue-alpha-20;
    }
  }
  
  // Read-only state
  &:read-only,
  &--readonly {
    background-color: $cold-grey-300; // #e9edf2
    color: $cold-grey-1000; // #606b7a
    border-color: $cold-grey-400; // #d1d7df
    cursor: default;
    
    &:hover {
      border-color: $cold-grey-400;
    }
    
    &:focus {
      border-color: $cold-grey-400;
      box-shadow: none;
    }
  }
  
  // Disabled state
  &:disabled,
  &--disabled {
    background-color: $cold-grey-300; // #e9edf2
    color: $cold-grey-800; // #7e8797
    border-color: $cold-grey-400; // #d1d7df
    cursor: not-allowed;
    opacity: 1;
    
    &::placeholder {
      color: $cold-grey-800;
    }
  }
  
  // ==================
  // SIZES
  // ==================
  
  // Large input
  &--large {
    height: $spacing-1200; // 48px
    padding: $spacing-300 $spacing-400; // 12px 16px
    font-size: $font-size-lg; // 18px
  }
  
  // Small input
  &--small {
    height: $spacing-800; // 32px
    padding: $spacing-100 $spacing-200; // 4px 8px
    font-size: $font-size-sm; // 14px
  }
  
  // ==================
  // WITH ICONS
  // ==================
  
  // Input with left icon
  &--with-icon-left {
    padding-left: $spacing-1000; // 40px
  }
  
  // Input with right icon
  &--with-icon-right {
    padding-right: $spacing-1000; // 40px
  }
  
  // ==================
  // ICON STYLES
  // ==================
  
  &__icon {
    position: absolute;
    display: flex;
    align-items: center;
    justify-content: center;
    width: $spacing-600; // 24px
    height: $spacing-600; // 24px
    pointer-events: none;
    color: $cold-grey-1000; // #606b7a
    
    &--left {
      left: $spacing-200; // 8px
    }
    
    &--right {
      right: $spacing-200; // 8px
    }
    
    // Icon colors for states
    .input--error ~ & {
      color: $semantic-red-900;
    }
    
    .input--success ~ & {
      color: $semantic-blue-1000;
    }
    
    svg {
      width: 100%;
      height: 100%;
      fill: currentColor;
    }
  }
}

// ==============================================
// TEXTAREA VARIANT
// ==============================================

.textarea {
  @extend .input;
  
  min-height: 120px;
  padding: $spacing-300; // 12px
  resize: vertical;
  line-height: 1.6;
  
  &--no-resize {
    resize: none;
  }
  
  &--auto-resize {
    resize: none;
    overflow: hidden;
  }
}

// ==============================================
// INPUT ADDONS (Prefix/Suffix)
// ==============================================

.input-addon {
  display: flex;
  align-items: center;
  
  &__prefix,
  &__suffix {
    display: flex;
    align-items: center;
    padding: 0 $spacing-300;
    background-color: $cold-grey-300;
    border: 1px solid $cold-grey-700;
    color: $cold-grey-1000;
    font-family: $font-family-primary;
    font-size: $font-size-base;
    font-weight: $font-weight-medium;
    white-space: nowrap;
  }
  
  &__prefix {
    border-right: none;
    border-radius: $radius-base 0 0 $radius-base;
  }
  
  &__suffix {
    border-left: none;
    border-radius: 0 $radius-base $radius-base 0;
  }
  
  .input {
    border-radius: 0;
    
    &:first-child {
      border-radius: $radius-base 0 0 $radius-base;
    }
    
    &:last-child {
      border-radius: 0 $radius-base $radius-base 0;
    }
  }
}

// ==============================================
// INPUT GROUP (Multiple inputs)
// ==============================================

.input-row {
  display: flex;
  gap: $spacing-300;
  
  &--vertical {
    flex-direction: column;
  }
  
  .input-group {
    flex: 1;
  }
}

// ==============================================
// SEARCH INPUT
// ==============================================

.input-search {
  position: relative;
  
  .input {
    padding-left: $spacing-1000; // 40px for icon
    padding-right: $spacing-1000; // 40px for clear button
  }
  
  &__icon {
    position: absolute;
    left: $spacing-300;
    top: 50%;
    transform: translateY(-50%);
    color: $cold-grey-1000;
    pointer-events: none;
  }
  
  &__clear {
    position: absolute;
    right: $spacing-200;
    top: 50%;
    transform: translateY(-50%);
    width: $spacing-600;
    height: $spacing-600;
    display: flex;
    align-items: center;
    justify-content: center;
    background: none;
    border: none;
    border-radius: $radius-small;
    color: $cold-grey-1000;
    cursor: pointer;
    padding: 0;
    transition: all $transition-speed $transition-ease;
    
    &:hover {
      background-color: $cold-grey-300;
      color: $cold-grey-1700;
    }
    
    &:active {
      background-color: $cold-grey-400;
    }
    
    &:focus {
      outline: 2px solid $teal-1600;
      outline-offset: 2px;
    }
  }
}

// ==============================================
// RESPONSIVE
// ==============================================

@include media-max-md {
  .input-row {
    flex-direction: column;
  }
  
  .input-group__label {
    font-size: $font-size-xs; // 12px on mobile
  }
}

